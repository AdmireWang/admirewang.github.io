{"version":3,"file":"js/chat-history-legacy.5bbba25c.js","mappings":"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","sources":["webpack://aiassistant-/./src/components/MobileSearch/index.vue?a11d","webpack://aiassistant-/./src/components/MobileSearch/index.vue","webpack://aiassistant-/./src/components/MobileSearch/index.vue?9bc6","webpack://aiassistant-/./src/components/HistoryHeader.vue?875e","webpack://aiassistant-/./src/components/HistoryHeader.vue","webpack://aiassistant-/./src/components/HistoryHeader.vue?4ce4","webpack://aiassistant-/./src/components/ClearHistoryModal/ClearHistoryModal.vue?1a3a","webpack://aiassistant-/./src/components/ClearHistoryModal/ClearHistoryModal.vue","webpack://aiassistant-/./src/components/ClearHistoryModal/ClearHistoryModal.vue?f487","webpack://aiassistant-/./src/views/Mobile/ChatHistory.vue?b41c","webpack://aiassistant-/./src/views/Mobile/ChatHistory.vue","webpack://aiassistant-/./src/views/Mobile/ChatHistory.vue?4105"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"ai-mobile-search\" }\nconst _hoisted_2 = [\"value\"]\n\nimport { PropType, ref } from 'vue';\nimport '@hwork/icon/search';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'index',\n  props: {\n    modelValue: String as PropType<string>,\n    showCancel: {\n        type: Boolean as PropType<boolean>,\n        default: false,\n    },\n},\n  emits: [\"update:modelValue\", \"cancel\"],\n  setup(__props, { emit: __emit }) {\n\nconst timer = ref<any>(null);\nconst props = __props;\n\nconst emit = __emit;\n\nconst updateValue = (event: Event) => {\n    if (timer.value !== null) {\n        clearTimeout(timer.value);\n    }\n    timer.value = setTimeout(() => {\n        const target = event.target as HTMLInputElement | null;\n        if (target) {\n            emit('update:modelValue', target.value);\n        }\n    }, 300);\n};\n\nconst cancelHandle = () => {\n    emit('update:modelValue', '');\n    emit('cancel');\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"ai-mobile-search-after\" }, [\n      _createElementVNode(\"h-icon-search\")\n    ], -1)),\n    _createElementVNode(\"input\", {\n      class: \"ai-mobile-search-input\",\n      placeholder: \"搜索\",\n      value: props.modelValue,\n      onInput: updateValue\n    }, null, 40, _hoisted_2),\n    (props.modelValue)\n      ? (_openBlock(), _createElementBlock(\"h-icon-close\", {\n          key: 0,\n          class: \"ai-mobile-search-cancel-icon\",\n          onClick: cancelHandle\n        }))\n      : _createCommentVNode(\"\", true),\n    (__props.showCancel || props.modelValue)\n      ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 1,\n          class: \"ai-mobile-search-cancel\",\n          onClick: cancelHandle\n        }, \" 取消 \"))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"ai-mobile-search\">\n        <div class=\"ai-mobile-search-after\">\n            <h-icon-search />\n        </div>\n        <input\n            class=\"ai-mobile-search-input\"\n            placeholder=\"搜索\"\n            :value=\"props.modelValue\"\n            @input=\"updateValue\"\n        />\n        <h-icon-close\n            v-if=\"props.modelValue\"\n            class=\"ai-mobile-search-cancel-icon\"\n            @click=\"cancelHandle\"\n        />\n\n        <div\n            class=\"ai-mobile-search-cancel\"\n            v-if=\"showCancel || props.modelValue\"\n            @click=\"cancelHandle\"\n        >\n            取消\n        </div>\n    </div>\n</template>\n<script setup lang=\"ts\">\nimport { PropType, ref } from 'vue';\nimport '@hwork/icon/search';\n\nconst timer = ref<any>(null);\nconst props = defineProps({\n    modelValue: String as PropType<string>,\n    showCancel: {\n        type: Boolean as PropType<boolean>,\n        default: false,\n    },\n});\n\nconst emit = defineEmits<{\n    (e: 'update:modelValue', value: string): void;\n    (e: 'cancel'): void;\n}>();\n\nconst updateValue = (event: Event) => {\n    if (timer.value !== null) {\n        clearTimeout(timer.value);\n    }\n    timer.value = setTimeout(() => {\n        const target = event.target as HTMLInputElement | null;\n        if (target) {\n            emit('update:modelValue', target.value);\n        }\n    }, 300);\n};\n\nconst cancelHandle = () => {\n    emit('update:modelValue', '');\n    emit('cancel');\n};\n</script>\n<style lang=\"less\" scoped>\n.ai-mobile-search {\n    margin-top: 16px;\n    margin-bottom: 12px;\n    width: 100%;\n    height: 32px;\n    border-radius: 6px;\n    overflow: hidden;\n    display: flex;\n    align-items: center;\n    position: relative;\n    &-input {\n        background-color: #fff;\n        border: 0px solid;\n        height: 36px;\n        outline: none;\n        font-size: 14px;\n        flex-grow: 1;\n        border-top-right-radius: 8px;\n        border-bottom-right-radius: 8px;\n        width: 0;\n        caret-color: rgb(134, 144, 156);\n        &::placeholder {\n            color: rgb(134, 144, 156);\n        }\n    }\n    &-cancel-icon {\n        font-size: 16px;\n        color: #c9cdd4;\n        position: absolute;\n        right: 52px;\n    }\n    &-cancel {\n        flex-shrink: 1;\n        height: 36px;\n        padding: 0 4px 0 12px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: rgb(78, 89, 105);\n    }\n    &-after {\n        width: 36px;\n        flex-shrink: 1;\n        height: 36px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: rgb(134, 144, 156);\n        background: #fff;\n    }\n}\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=10ef3d47&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-10ef3d47\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\nimport _imports_0 from '@/assets/icons/left.svg'\n\n\nimport '@hwork/icon/delete';\nimport { useRouter } from 'vue-router';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'HistoryHeader',\n  setup(__props) {\n\nconst router = useRouter();\n\nconst toBack = () => {\n    router.go(-1);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_layout_header = _resolveComponent(\"a-layout-header\")!\n\n  return (_openBlock(), _createBlock(_component_a_layout_header, { class: \"chat-header-mobile\" }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", {\n        class: \"chat-back\",\n        onClick: toBack\n      }, _cache[1] || (_cache[1] = [\n        _createElementVNode(\"img\", {\n          src: _imports_0,\n          alt: \"返回\"\n        }, null, -1)\n      ])),\n      _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"chat-title\" }, [\n        _createElementVNode(\"span\", null, \"历史记录\")\n      ], -1)),\n      _createElementVNode(\"span\", {\n        class: \"chat-delete\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('delete')))\n      }, _cache[2] || (_cache[2] = [\n        _createElementVNode(\"h-icon-delete\", null, null, -1)\n      ]))\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n    <a-layout-header class=\"chat-header-mobile\">\n        <div class=\"chat-back\" @click=\"toBack\">\n            <img src=\"@/assets/icons/left.svg\" alt=\"返回\" />\n        </div>\n\n        <div class=\"chat-title\">\n            <span>历史记录</span>\n        </div>\n        <span class=\"chat-delete\" @click=\"$emit('delete')\">\n            <h-icon-delete />\n        </span>\n    </a-layout-header>\n</template>\n<script setup lang=\"ts\">\nimport '@hwork/icon/delete';\nimport { useRouter } from 'vue-router';\nconst router = useRouter();\n\nconst toBack = () => {\n    router.go(-1);\n};\n</script>\n<style lang=\"less\" scoped>\n.chat-header-mobile {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 48px;\n    line-height: 48px;\n    padding: 0 11px;\n    background-color: transparent;\n    &.chat-header-mobile-ios {\n        height: 100px;\n        padding-top: 52px;\n    }\n    .chat-back {\n        display: flex;\n        width: 40px;\n        height: 40px;\n        align-items: center;\n        color: #4e5969;\n    }\n    .chat-title {\n        display: inline-flex;\n        align-items: center;\n        font-size: 18px;\n        font-weight: 600;\n    }\n    .chat-delete {\n        display: inline-flex;\n        width: 30px;\n        height: 30px;\n        justify-content: center;\n        align-items: center;\n        font-size: 20px;\n        color: #4e5969;\n    }\n}\n</style>\n","import script from \"./HistoryHeader.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HistoryHeader.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HistoryHeader.vue?vue&type=style&index=0&id=a0b93688&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a0b93688\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"footer-wrap\" }\n\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { clearChatGroups } from '@/hooks/useChatGroupList';\nimport { deleteChatGroup } from '@/api/chat';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ClearHistoryModal',\n  emits: [\"refresh\"],\n  setup(__props, { expose: __expose, emit: __emit }) {\n\nconst router = useRouter();\nconst modalVisible = ref(false);\nconst emit = __emit;\nasync function handleClear() {\n    await clearChatGroups();\n    router.push({\n        path: '/chat/new',\n        query: {\n            agent: 'super',\n        },\n    });\n    modalVisible.value = false;\n};\nasync function deleteHistory(groupCode: string) {\n    await deleteChatGroup(groupCode);\n};\nconst show = async ({ groupCode }: { groupCode?: string }) => {\n    if (groupCode) {\n        await deleteHistory(groupCode);\n        emit('refresh');\n    } else {\n        modalVisible.value = true;\n    }\n};\n__expose({ show });\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_modal = _resolveComponent(\"a-modal\")!\n\n  return (_openBlock(), _createBlock(_component_a_modal, {\n    visible: modalVisible.value,\n    \"onUpdate:visible\": _cache[1] || (_cache[1] = ($event: any) => ((modalVisible).value = $event)),\n    closable: false,\n    footer: null,\n    width: 311,\n    wrapClassName: \"clear-modal-mobile\"\n  }, {\n    default: _withCtx(() => [\n      _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"modal-content\" }, \"删除后无法恢复，是否继续此操作？\", -1)),\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", {\n          class: \"btn\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (modalVisible.value = false))\n        }, \"取消\"),\n        _createElementVNode(\"div\", {\n          class: \"btn danger\",\n          onClick: handleClear\n        }, \"确认\")\n      ])\n    ]),\n    _: 1\n  }, 8, [\"visible\"]))\n}\n}\n\n})","<template>\n    <a-modal\n        v-model:visible=\"modalVisible\"\n        :closable=\"false\"\n        :footer=\"null\"\n        :width=\"311\"\n        wrapClassName=\"clear-modal-mobile\"\n    >\n        <div class=\"modal-content\">删除后无法恢复，是否继续此操作？</div>\n        <div class=\"footer-wrap\">\n            <div class=\"btn\" @click=\"modalVisible = false\">取消</div>\n            <div class=\"btn danger\" @click=\"handleClear\">确认</div>\n        </div>\n    </a-modal>\n</template>\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { clearChatGroups } from '@/hooks/useChatGroupList';\nimport { deleteChatGroup } from '@/api/chat';\nconst router = useRouter();\nconst modalVisible = ref(false);\nconst emit = defineEmits<{\n    (e: 'refresh'): void;\n}>();\nasync function handleClear() {\n    await clearChatGroups();\n    router.push({\n        path: '/chat/new',\n        query: {\n            agent: 'super',\n        },\n    });\n    modalVisible.value = false;\n};\nasync function deleteHistory(groupCode: string) {\n    await deleteChatGroup(groupCode);\n};\nconst show = async ({ groupCode }: { groupCode?: string }) => {\n    if (groupCode) {\n        await deleteHistory(groupCode);\n        emit('refresh');\n    } else {\n        modalVisible.value = true;\n    }\n};\ndefineExpose({ show });\n</script>\n<style lang=\"less\">\n.clear-modal-mobile {\n    .modal-title {\n        min-height: 24px;\n    }\n    .modal-content {\n        color: #4e5969;\n        font-size: 14px;\n        line-height: 94px;\n        text-align: center;\n    }\n    .footer-wrap {\n        display: flex;\n        height: 54px;\n        margin: 0 -24px -16px;\n        border-top: 1px solid #E5E6EB;\n        .btn {\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            width: 50%;\n            font-size: 16px;\n            &.danger {\n                color: #F53F3F;\n                border-left: 1px solid #E5E6EB;\n            }\n        }\n    }\n}\n</style>","import script from \"./ClearHistoryModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ClearHistoryModal.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ClearHistoryModal.vue?vue&type=style&index=0&id=7d1ecb09&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, createElementVNode as _createElementVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, withCtx as _withCtx, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { class: \"chat-history-search\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"date-wrap\"\n}\nconst _hoisted_3 = {\n  key: 1,\n  class: \"date-wrap mt20\"\n}\nconst _hoisted_4 = {\n  key: 1,\n  class: \"chat-list-empty\"\n}\nconst _hoisted_5 = [\"src\"]\n\nimport { ref, computed, watch } from 'vue';\nimport dayjs from 'dayjs';\nimport ChatCard from '@/components/ChatCard/index.vue';\nimport HistoryHeader from '@/components/HistoryHeader.vue';\nimport ClearHistoryModal from '@/components/ClearHistoryModal/ClearHistoryModal.vue';\nimport MobileSearch from '@/components/MobileSearch/index.vue';\nimport emptyDataImage from '@/assets/images/empty-data.png';\nimport {\n    chatGroupList,\n    queryChatGroupList,\n    changeChatGroup,\n    chatGroupFilterList,\n} from '@/hooks/useChatGroupList';\nimport { isiOS } from '@/utils/util';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ChatHistory',\n  setup(__props) {\n\nconst searchText = ref<string>('');\nconst modalRef = ref<InstanceType<typeof ClearHistoryModal>>();\nconst loading = ref<boolean>(true);\nconst todayChatGroupList = computed(() => {\n    let list = chatGroupList.value;\n    if (searchText.value) {\n        list = chatGroupFilterList.value;\n    }\n\n    const tmp = list.filter((item) => {\n        return (\n            dayjs(item.lastChatTime).format('YYYY-MM-DD') ===\n                dayjs().format('YYYY-MM-DD') && item.agentCode !== 'feedback'\n        );\n    });\n    return tmp.reverse();\n});\n\nconst historyChatGroupList = computed(() => {\n    let list = chatGroupList.value;\n    if (searchText.value) {\n        list = chatGroupFilterList.value;\n    }\n    const tmp = list.filter((item) => {\n        return (\n            dayjs(item.lastChatTime).format('YYYY-MM-DD') !==\n            dayjs().format('YYYY-MM-DD')\n        );\n    });\n    return tmp.reverse();\n});\nconst clearPrompt = (groupCode?: string) => {\n    modalRef.value?.show({ groupCode });\n};\n\nwatch(\n    () => searchText.value,\n    async () => {\n        loading.value = true;\n        await queryChatGroupList(searchText.value);\n        loading.value = false;\n    },\n    { immediate: true },\n);\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_layout_content = _resolveComponent(\"a-layout-content\")!\n  const _component_a_spin = _resolveComponent(\"a-spin\")!\n  const _component_a_layout = _resolveComponent(\"a-layout\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_a_layout, { class: \"chat-history\" }, {\n      default: _withCtx(() => [\n        _createVNode(HistoryHeader, { onDelete: clearPrompt }),\n        _createElementVNode(\"div\", _hoisted_1, [\n          _createVNode(MobileSearch, {\n            modelValue: searchText.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((searchText).value = $event))\n          }, null, 8, [\"modelValue\"])\n        ]),\n        _createVNode(_component_a_spin, { spinning: loading.value }, {\n          default: _withCtx(() => [\n            (todayChatGroupList.value.length || historyChatGroupList.value.length)\n              ? (_openBlock(), _createBlock(_component_a_layout_content, {\n                  key: 0,\n                  class: _normalizeClass([\"chat-list\", { 'chat-list-ios': _unref(isiOS)() }])\n                }, {\n                  default: _withCtx(() => [\n                    (todayChatGroupList.value.length > 0)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \" 今天 \"))\n                      : _createCommentVNode(\"\", true),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(todayChatGroupList.value, (item) => {\n                      return (_openBlock(), _createBlock(ChatCard, {\n                        key: item.groupCode,\n                        chatGroup: item,\n                        onJump: ($event: any) => (_unref(changeChatGroup)(item.groupCode)),\n                        onDelete: ($event: any) => (clearPrompt(item.groupCode))\n                      }, null, 8, [\"chatGroup\", \"onJump\", \"onDelete\"]))\n                    }), 128)),\n                    (historyChatGroupList.value.length > 0)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \" 最近7天 \"))\n                      : _createCommentVNode(\"\", true),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(historyChatGroupList.value, (item) => {\n                      return (_openBlock(), _createBlock(ChatCard, {\n                        key: item.groupCode,\n                        chatGroup: item,\n                        onJump: ($event: any) => (_unref(changeChatGroup)(item.groupCode)),\n                        onDelete: ($event: any) => (clearPrompt(item.groupCode))\n                      }, null, 8, [\"chatGroup\", \"onJump\", \"onDelete\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"class\"]))\n              : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                  _createElementVNode(\"img\", { src: _unref(emptyDataImage) }, null, 8, _hoisted_5),\n                  _createElementVNode(\"span\", null, _toDisplayString(searchText.value ? '无搜索结果' : '暂无数据'), 1)\n                ]))\n          ]),\n          _: 1\n        }, 8, [\"spinning\"])\n      ]),\n      _: 1\n    }),\n    _createVNode(ClearHistoryModal, {\n      ref_key: \"modalRef\",\n      ref: modalRef,\n      onRefresh: _cache[1] || (_cache[1] = () => _unref(queryChatGroupList)(searchText.value))\n    }, null, 512)\n  ], 64))\n}\n}\n\n})","<template>\n    <a-layout class=\"chat-history\">\n        <HistoryHeader @delete=\"clearPrompt\" />\n        <div class=\"chat-history-search\">\n            <MobileSearch v-model=\"searchText\" />\n        </div>\n\n        <a-spin :spinning=\"loading\">\n            <a-layout-content\n                class=\"chat-list\"\n                :class=\"{ 'chat-list-ios': isiOS() }\"\n                v-if=\"todayChatGroupList.length || historyChatGroupList.length\"\n            >\n                <div v-if=\"todayChatGroupList.length > 0\" class=\"date-wrap\">\n                    今天\n                </div>\n                <template\n                    v-for=\"item in todayChatGroupList\"\n                    :key=\"item.groupCode\"\n                >\n                    <ChatCard\n                        :chatGroup=\"item\"\n                        @jump=\"changeChatGroup(item.groupCode)\"\n                        @delete=\"clearPrompt(item.groupCode)\"\n                    />\n                </template>\n                <div\n                    v-if=\"historyChatGroupList.length > 0\"\n                    class=\"date-wrap mt20\"\n                >\n                    最近7天\n                </div>\n                <template\n                    v-for=\"item in historyChatGroupList\"\n                    :key=\"item.groupCode\"\n                >\n                    <ChatCard\n                        :chatGroup=\"item\"\n                        @jump=\"changeChatGroup(item.groupCode)\"\n                        @delete=\"clearPrompt(item.groupCode)\"\n                    />\n                </template>\n            </a-layout-content>\n            <div class=\"chat-list-empty\" v-else>\n                <img :src=\"emptyDataImage\" />\n                <span>\n                    {{ searchText ? '无搜索结果' : '暂无数据' }}\n                </span>\n            </div>\n        </a-spin>\n    </a-layout>\n    <ClearHistoryModal\n        ref=\"modalRef\"\n        @refresh=\"() => queryChatGroupList(searchText)\"\n    />\n</template>\n<script setup lang=\"ts\">\nimport { ref, computed, watch } from 'vue';\nimport dayjs from 'dayjs';\nimport ChatCard from '@/components/ChatCard/index.vue';\nimport HistoryHeader from '@/components/HistoryHeader.vue';\nimport ClearHistoryModal from '@/components/ClearHistoryModal/ClearHistoryModal.vue';\nimport MobileSearch from '@/components/MobileSearch/index.vue';\nimport emptyDataImage from '@/assets/images/empty-data.png';\nimport {\n    chatGroupList,\n    queryChatGroupList,\n    changeChatGroup,\n    chatGroupFilterList,\n} from '@/hooks/useChatGroupList';\nimport { isiOS } from '@/utils/util';\nconst searchText = ref<string>('');\nconst modalRef = ref<InstanceType<typeof ClearHistoryModal>>();\nconst loading = ref<boolean>(true);\nconst todayChatGroupList = computed(() => {\n    let list = chatGroupList.value;\n    if (searchText.value) {\n        list = chatGroupFilterList.value;\n    }\n\n    const tmp = list.filter((item) => {\n        return (\n            dayjs(item.lastChatTime).format('YYYY-MM-DD') ===\n                dayjs().format('YYYY-MM-DD') && item.agentCode !== 'feedback'\n        );\n    });\n    return tmp.reverse();\n});\n\nconst historyChatGroupList = computed(() => {\n    let list = chatGroupList.value;\n    if (searchText.value) {\n        list = chatGroupFilterList.value;\n    }\n    const tmp = list.filter((item) => {\n        return (\n            dayjs(item.lastChatTime).format('YYYY-MM-DD') !==\n            dayjs().format('YYYY-MM-DD')\n        );\n    });\n    return tmp.reverse();\n});\nconst clearPrompt = (groupCode?: string) => {\n    modalRef.value?.show({ groupCode });\n};\n\nwatch(\n    () => searchText.value,\n    async () => {\n        loading.value = true;\n        await queryChatGroupList(searchText.value);\n        loading.value = false;\n    },\n    { immediate: true },\n);\n</script>\n<style lang=\"less\" scoped>\n.chat-list-empty {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    margin-top: 60px;\n    flex-direction: column;\n    color: rgb(78, 89, 105);\n    img {\n        width: 110px;\n    }\n}\n.chat-history {\n    background: transparent;\n    &-search {\n        padding: 0 16px;\n    }\n}\n.mt20 {\n    margin-top: 20px;\n}\n.chat-list {\n    overflow-y: auto;\n    padding: 0 16px 16px;\n    height: calc(100vh - 128px);\n}\n.chat-list-ios {\n    height: calc(100vh - 162px) !important;\n}\n.date-wrap {\n    color: #4e5969;\n    line-height: 20px;\n}\n</style>\n","import script from \"./ChatHistory.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ChatHistory.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ChatHistory.vue?vue&type=style&index=0&id=55f227be&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-55f227be\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_defineComponent","__name","props","modelValue","String","showCancel","type","Boolean","default","emits","setup","__props","_ref","__emit","emit","timer","ref","updateValue","event","value","clearTimeout","setTimeout","target","cancelHandle","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","placeholder","onInput","key","onClick","_createCommentVNode","__exports__","router","useRouter","toBack","go","_component_a_layout_header","_resolveComponent","_createBlock","_withCtx","src","_imports_0","alt","$event","$emit","_","__expose","expose","modalVisible","handleClear","_handleClear","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","wrap","_context2","prev","next","clearChatGroups","push","path","query","agent","stop","deleteHistory","_x","_deleteHistory","_callee3","groupCode","_context3","deleteChatGroup","show","_ref3","_callee","_ref2","_context","_x2","_component_a_modal","visible","closable","footer","width","wrapClassName","_hoisted_3","_hoisted_4","_hoisted_5","searchText","modalRef","loading","todayChatGroupList","computed","list","chatGroupList","chatGroupFilterList","tmp","filter","item","dayjs","lastChatTime","format","agentCode","reverse","historyChatGroupList","clearPrompt","_modalRef$value","watch","queryChatGroupList","immediate","_component_a_layout_content","_component_a_spin","_component_a_layout","_Fragment","_createVNode","HistoryHeader","onDelete","MobileSearch","spinning","length","_normalizeClass","_unref","isiOS","_renderList","ChatCard","chatGroup","onJump","changeChatGroup","emptyDataImage","_toDisplayString","ClearHistoryModal","ref_key","onRefresh"],"sourceRoot":""}