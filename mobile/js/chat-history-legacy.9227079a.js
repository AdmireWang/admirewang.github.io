"use strict";(self["webpackJsonp_aiassistant"]=self["webpackJsonp_aiassistant"]||[]).push([[750],{74264:function(e,u,n){n.d(u,{A:function(){return s}});var a=n(26436),t=n(15167),r=(n(90192),{class:"ai-mobile-search"}),l=["value"],i=(0,a.pM)({__name:"index",props:{modelValue:String,showCancel:{type:Boolean,default:!1}},emits:["update:modelValue","cancel"],setup:function(e,u){var n=u.emit,i=(0,t.KR)(null),c=e,o=n,s=function(e){null!==i.value&&clearTimeout(i.value),i.value=setTimeout((function(){var u=e.target;u&&o("update:modelValue",u.value)}),300)},M=function(){o("update:modelValue",""),o("cancel")};return function(u,n){return(0,a.uX)(),(0,a.CE)("div",r,[n[0]||(n[0]=(0,a.Lk)("div",{class:"ai-mobile-search-after"},[(0,a.Lk)("h-icon-search")],-1)),(0,a.Lk)("input",{class:"ai-mobile-search-input",placeholder:"搜索",value:c.modelValue,onInput:s},null,40,l),c.modelValue?((0,a.uX)(),(0,a.CE)("h-icon-close",{key:0,class:"ai-mobile-search-cancel-icon",onClick:M})):(0,a.Q3)("",!0),e.showCancel||c.modelValue?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"ai-mobile-search-cancel",onClick:M}," 取消 ")):(0,a.Q3)("",!0)])}}}),c=n(55932);const o=(0,c.A)(i,[["__scopeId","data-v-10ef3d47"]]);var s=o},37180:function(e,u,n){n.r(u),n.d(u,{default:function(){return z}});var a=n(42153),t=n(75805),r=(n(2008),n(94490),n(26099),n(98992),n(54520),n(26436)),l=n(87959),i=n(15167),c=n(58699),o=n.n(c),s=n(38175),M=n(45047),d=(n(65831),n(75610)),D=(0,r.pM)({__name:"HistoryHeader",setup:function(e){var u=(0,d.rd)(),n=function(){u.go(-1)};return function(e,u){var a=(0,r.g2)("a-layout-header");return(0,r.uX)(),(0,r.Wv)(a,{class:"chat-header-mobile"},{default:(0,r.k6)((function(){return[(0,r.Lk)("div",{class:"chat-back",onClick:n},u[1]||(u[1]=[(0,r.Lk)("img",{src:M,alt:"返回"},null,-1)])),u[3]||(u[3]=(0,r.Lk)("div",{class:"chat-title"},[(0,r.Lk)("span",null,"历史记录")],-1)),(0,r.Lk)("span",{class:"chat-delete",onClick:u[0]||(u[0]=function(u){return e.$emit("delete")})},u[2]||(u[2]=[(0,r.Lk)("h-icon-delete",null,null,-1)]))]})),_:1})}}}),v=n(55932);const g=(0,v.A)(D,[["__scopeId","data-v-33368aba"]]);var I=g,p=(n(44114),n(70001)),f=n(89343),k={class:"footer-wrap"},A=(0,r.pM)({__name:"ClearHistoryModal",emits:["refresh"],setup:function(e,u){var n=u.expose,l=u.emit,c=(0,d.rd)(),o=(0,i.KR)(!1),s=l;function M(){return D.apply(this,arguments)}function D(){return D=(0,t.A)((0,a.A)().mark((function e(){return(0,a.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,p.ac)();case 2:c.push({path:"/chat/new",query:{agent:"super"}}),o.value=!1;case 4:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=(0,t.A)((0,a.A)().mark((function e(u){return(0,a.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,f.PY)(u);case 2:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}var I=function(){var e=(0,t.A)((0,a.A)().mark((function e(u){var n;return(0,a.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=u.groupCode,!n){e.next=7;break}return e.next=4,v(n);case 4:s("refresh"),e.next=8;break;case 7:o.value=!0;case 8:case"end":return e.stop()}}),e)})));return function(u){return e.apply(this,arguments)}}();return n({show:I}),function(e,u){var n=(0,r.g2)("a-modal");return(0,r.uX)(),(0,r.Wv)(n,{visible:o.value,"onUpdate:visible":u[1]||(u[1]=function(e){return o.value=e}),closable:!1,footer:null,width:311,wrapClassName:"clear-modal-mobile"},{default:(0,r.k6)((function(){return[u[2]||(u[2]=(0,r.Lk)("div",{class:"modal-content"},"删除后无法恢复，是否继续此操作？",-1)),(0,r.Lk)("div",k,[(0,r.Lk)("div",{class:"btn",onClick:u[0]||(u[0]=function(e){return o.value=!1})},"取消"),(0,r.Lk)("div",{class:"btn danger",onClick:M},"确认")])]})),_:1},8,["visible"])}}});const L=A;var y=L,N=n(74264),m=n(96581),j=n(17126),x={class:"chat-history-search"},h={key:0,class:"date-wrap"},C={key:1,class:"date-wrap mt20"},w={key:1,class:"chat-list-empty"},E=["src"],T=(0,r.pM)({__name:"ChatHistory",setup:function(e){var u=(0,i.KR)(""),n=(0,i.KR)(),c=(0,i.KR)(!0),M=(0,r.EW)((function(){var e=p.GF.value;u.value&&(e=p.Oo.value);var n=e.filter((function(e){return o()(e.lastChatTime).format("YYYY-MM-DD")===o()().format("YYYY-MM-DD")&&"feedback"!==e.agentCode}));return n.reverse()})),d=(0,r.EW)((function(){var e=p.GF.value;u.value&&(e=p.Oo.value);var n=e.filter((function(e){return o()(e.lastChatTime).format("YYYY-MM-DD")!==o()().format("YYYY-MM-DD")}));return n.reverse()})),D=function(e){var u;null===(u=n.value)||void 0===u||u.show({groupCode:e})};return(0,r.wB)((function(){return u.value}),(0,t.A)((0,a.A)().mark((function e(){return(0,a.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c.value=!0,e.next=3,(0,p.gL)(u.value);case 3:c.value=!1;case 4:case"end":return e.stop()}}),e)}))),{immediate:!0}),function(e,a){var t=(0,r.g2)("a-layout-content"),o=(0,r.g2)("a-spin"),v=(0,r.g2)("a-layout");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(v,{class:"chat-history"},{default:(0,r.k6)((function(){return[(0,r.bF)(I,{onDelete:D}),(0,r.Lk)("div",x,[(0,r.bF)(N.A,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return u.value=e})},null,8,["modelValue"])]),(0,r.bF)(o,{spinning:c.value},{default:(0,r.k6)((function(){return[M.value.length||d.value.length?((0,r.uX)(),(0,r.Wv)(t,{key:0,class:(0,l.C4)(["chat-list",{"chat-list-ios":(0,i.R1)(j.OF)()}])},{default:(0,r.k6)((function(){return[M.value.length>0?((0,r.uX)(),(0,r.CE)("div",h," 今天 ")):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(M.value,(function(e){return(0,r.uX)(),(0,r.Wv)(s.A,{key:e.groupCode,chatGroup:e,onJump:function(u){return(0,i.R1)(p.OP)(e.groupCode)},onDelete:function(u){return D(e.groupCode)}},null,8,["chatGroup","onJump","onDelete"])})),128)),d.value.length>0?((0,r.uX)(),(0,r.CE)("div",C," 最近7天 ")):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(d.value,(function(e){return(0,r.uX)(),(0,r.Wv)(s.A,{key:e.groupCode,chatGroup:e,onJump:function(u){return(0,i.R1)(p.OP)(e.groupCode)},onDelete:function(u){return D(e.groupCode)}},null,8,["chatGroup","onJump","onDelete"])})),128))]})),_:1},8,["class"])):((0,r.uX)(),(0,r.CE)("div",w,[(0,r.Lk)("img",{src:(0,i.R1)(m)},null,8,E),(0,r.Lk)("span",null,(0,l.v_)(u.value?"无搜索结果":"暂无数据"),1)]))]})),_:1},8,["spinning"])]})),_:1}),(0,r.bF)(y,{ref_key:"modalRef",ref:n,onRefresh:a[1]||(a[1]=function(){return(0,i.R1)(p.gL)(u.value)})},null,512)],64)}}});const Y=(0,v.A)(T,[["__scopeId","data-v-55f227be"]]);var z=Y},45047:function(e){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAuMDAwMDAwIiBoZWlnaHQ9IjIwLjAwMDAwMCIgdmlld0JveD0iMCAwIDIwIDIwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KCTxkZXNjPgoJCQlDcmVhdGVkIHdpdGggUGl4c28uCgk8L2Rlc2M+Cgk8ZGVmcy8+Cgk8cGF0aCBpZD0i5ZCI5bm2IiBkPSJNMTMuNDUgMy4zMkMxMy43OCAyLjk5IDEzLjc4IDIuNjYgMTMuNDUgMi4zM0MxMy4xMiAyIDEyLjc5IDIgMTIuNDYgMi4zM0w1Ljg3IDguOTJDNS41NiA5LjIyIDUuNDEgOS41OSA1LjQxIDEwLjAyQzUuNDEgMTAuNDQgNS41NiAxMC44MSA1Ljg3IDExLjExTDEyLjQ2IDE3LjdDMTIuNiAxNy44NCAxMi43NiAxNy45MSAxMi45NiAxNy45MUMxMy4xNSAxNy45MSAxMy4zMSAxNy44NCAxMy40NSAxNy43QzEzLjU5IDE3LjU3IDEzLjY2IDE3LjQgMTMuNjYgMTcuMjFDMTMuNjYgMTcuMDIgMTMuNTkgMTYuODUgMTMuNDUgMTYuNzJMNi44NiAxMC4xMkM2LjgyIDEwLjA4IDYuOCAxMC4wNSA2LjggMTAuMDJDNi44IDkuOTggNi44MiA5Ljk1IDYuODYgOS45MUwxMy40NSAzLjMyTDEzLjQ1IDMuMzJaIiBmaWxsPSIjNEU1OTY5IiBmaWxsLW9wYWNpdHk9IjEuMDAwMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KCTxwYXRoIGlkPSLlkIjlubYiIGQ9Ik0xMy40NSAyLjMzQzEzLjEyIDIgMTIuNzkgMiAxMi40NiAyLjMzTDUuODcgOC45MkM1LjU2IDkuMjIgNS40MSA5LjU5IDUuNDEgMTAuMDJDNS40MSAxMC40NCA1LjU2IDEwLjgxIDUuODcgMTEuMTFMMTIuNDYgMTcuN0MxMi42IDE3Ljg0IDEyLjc2IDE3LjkxIDEyLjk2IDE3LjkxQzEzLjE1IDE3LjkxIDEzLjMxIDE3Ljg0IDEzLjQ1IDE3LjdDMTMuNTkgMTcuNTcgMTMuNjYgMTcuNCAxMy42NiAxNy4yMUMxMy42NiAxNy4wMiAxMy41OSAxNi44NSAxMy40NSAxNi43Mkw2Ljg2IDEwLjEyQzYuODIgMTAuMDggNi44IDEwLjA1IDYuOCAxMC4wMkM2LjggOS45OCA2LjgyIDkuOTUgNi44NiA5LjkxTDEzLjQ1IDMuMzJMMTMuNDUgMy4zMkMxMy43OCAyLjk5IDEzLjc4IDIuNjYgMTMuNDUgMi4zM1oiIHN0cm9rZT0iIzRFNTk2OSIgc3Ryb2tlLW9wYWNpdHk9IjEuMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAuMTAwMDAwIi8+Cjwvc3ZnPgo="}}]);
//# sourceMappingURL=chat-history-legacy.9227079a.js.map