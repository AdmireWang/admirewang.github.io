{"version":3,"file":"js/998-legacy.fa6584e1.js","mappings":"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","sources":["webpack://aiassistant-/./src/api/general.ts","webpack://aiassistant-/./src/components/Market/pc/CreateAssistant/constants.ts","webpack://aiassistant-/./node_modules/@hwork/icon/es/icons/star.js","webpack://aiassistant-/./src/components/Market/pc/CreateAssistant/Avatar.vue?95c4","webpack://aiassistant-/./src/components/Market/pc/CreateAssistant/Avatar.vue","webpack://aiassistant-/./src/components/Market/pc/CreateAssistant/Avatar.vue?1012"],"sourcesContent":["import request from '@/utils/request';\n\nexport interface Img {\n    url: string;\n    size: string;\n}\n// 获取头像图片\nexport function getAvatarImgs() {\n    return request<Res<Img[]>>({\n        url: '/api/agent-base/v1/icons?kind=agent',\n    });\n}","import { ref } from 'vue';\nimport { Img, getAvatarImgs } from '@/api/general';\nexport const avatarImgs = ref<Img[]>([]);\nexport const bgColorList: string[] = [\n    '#6182FF',\n    '#65C344',\n    '#FF8A1D',\n    '#FE5F4D',\n    '#9369FF',\n    '#FF6DB8',\n    '#00C8B9',\n];\n\nexport const queryAvatarImgs = async () => {\n    const res = await getAvatarImgs();\n    avatarImgs.value = res.data;\n};","import t from \"../base.js\";\nconst e = \"h-icon-star\";\nclass s extends t {\n  constructor() {\n    super(), this.cssClassName = \"h-icon-star\";\n  }\n  getSvgContent() {\n    return '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 14\" width=\"1em\" height=\"1em\" focusable=\"false\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M4.18454 4.45786L1.61183 4.75552C0.771057 4.85281 0.423813 5.88547 1.03496 6.47101L2.9366 8.29291C3.19135 8.53699 3.29865 8.89722 3.21895 9.24088L2.54956 12.1278C2.34767 12.9985 3.30238 13.6765 4.05795 13.199L6.46529 11.6776C6.7916 11.4713 7.20747 11.4713 7.53378 11.6776L9.94112 13.199C10.6967 13.6765 11.6514 12.9985 11.4495 12.1278L10.7801 9.24088C10.7004 8.89722 10.8077 8.53699 11.0625 8.29291L12.9641 6.47101C13.5753 5.88547 13.228 4.85281 12.3873 4.75552L9.81451 4.45786C9.46805 4.41779 9.16748 4.20004 9.02139 3.88333L7.90759 1.4686C7.55017 0.693726 6.44888 0.693726 6.09148 1.4686L4.97766 3.88333C4.83157 4.20004 4.53102 4.41779 4.18454 4.45786ZM7.93181 4.38599L6.99962 2.36499L6.06743 4.38599C5.90672 4.73438 5.67102 5.02112 5.36031 5.24619C5.04961 5.47125 4.70369 5.60587 4.32256 5.64996L2.1723 5.89874L3.76686 7.42645C4.04707 7.69492 4.24257 8.01511 4.35335 8.38702C4.46411 8.75894 4.47568 9.13391 4.38803 9.51196L3.82864 11.9245L5.82428 10.6632C6.18323 10.4364 6.57501 10.3229 6.99962 10.3229C7.42424 10.3229 7.81602 10.4364 8.17497 10.6632L10.1706 11.9245L9.61122 9.51196C9.52356 9.13391 9.53513 8.75894 9.6459 8.38702C9.75668 8.01511 9.95218 7.69492 10.2324 7.42645L11.827 5.89874L9.67668 5.64996C9.29556 5.60587 8.94965 5.47125 8.63893 5.24619C8.32822 5.02112 8.09251 4.73438 7.93181 4.38599Z\" fill-rule=\"evenodd\"/></svg>';\n  }\n}\nwindow.customElements.get(e) || window.customElements.define(e, s);\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx } from \"vue\"\nimport _imports_0 from '@/assets/avatars/select.svg'\n\n\nconst _hoisted_1 = { class: \"avatar-container\" }\nconst _hoisted_2 = [\"src\"]\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = { class: \"color-list\" }\nconst _hoisted_6 = [\"onClick\"]\nconst _hoisted_7 = { class: \"color-item-bgf\" }\nconst _hoisted_8 = {\n  key: 0,\n  src: _imports_0\n}\nconst _hoisted_9 = { class: \"btn-wrap\" }\nconst _hoisted_10 = {\n  key: 1,\n  class: \"avatar-loading\"\n}\n\nimport { ref, onMounted, watch } from 'vue';\nimport { bgColorList, avatarImgs, queryAvatarImgs } from './constants';\nimport '@hwork/icon/edit';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Avatar',\n  props: {\n    avatar: {},\n    avatarBg: {}\n  },\n  setup(__props: any, { expose: __expose }) {\n\nconst props = __props;\nconst selectedAvatar = ref('');\nconst selectedBg = ref(bgColorList[0]);\nconst currentAvatar = ref(require(`@/assets/avatars/avatar1.svg`));\nconst currentBg = ref(bgColorList[0]);\nconst selectRef = ref<HTMLElement>();\nconst getSelectStyle = (url: string) => {\n    if (url === selectedAvatar.value) {\n        return { background: selectedBg.value };\n    } else {\n        return {};\n    }\n};\nconst confirm = () => {\n    currentAvatar.value = selectedAvatar.value;\n    currentBg.value = selectedBg.value;\n    selectRef.value?.blur();\n};\nconst getAvatarData = () => {\n    return {\n        icon: currentAvatar.value,\n        iconBackground: currentBg.value,\n    };\n};\nconst initData = () => {\n    currentBg.value = props.avatarBg || bgColorList[0];\n    selectedBg.value = props.avatarBg || bgColorList[0];\n    selectedAvatar.value = props.avatar || avatarImgs.value[0]?.url;\n    currentAvatar.value = props.avatar || avatarImgs.value[0]?.url;\n};\nwatch(\n    () => avatarImgs.value,\n    (newVal) => {\n        if (newVal.length) {\n            initData();\n        }\n    },\n);\nwatch(\n    () => props.avatar,\n    () => {\n        initData();\n    },\n);\nonMounted(() => {\n    queryAvatarImgs();\n});\n__expose({ getAvatarData });\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_nodes = _resolveComponent(\"v-nodes\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_spin = _resolveComponent(\"a-spin\")!\n  const _component_a_select = _resolveComponent(\"a-select\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      style: _normalizeStyle({ background: currentBg.value }),\n      class: \"avatar-img\"\n    }, [\n      _createElementVNode(\"img\", {\n        src: currentAvatar.value,\n        width: 32,\n        height: 32\n      }, null, 8, _hoisted_2),\n      _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"edit-btn\" }, [\n        _createElementVNode(\"h-icon-edit\", { class: \"edit-icon h-icon-edit\" })\n      ], -1)),\n      _createVNode(_component_a_select, {\n        ref_key: \"selectRef\",\n        ref: selectRef,\n        bordered: false,\n        dropdownMatchSelectWidth: false,\n        class: \"select-avatar\",\n        dropdownClassName: \"avatar-dropdown\"\n      }, {\n        dropdownRender: _withCtx(({ menuNode: menu }) => [\n          _createVNode(_component_v_nodes, { vnodes: menu }, null, 8, [\"vnodes\"]),\n          (_unref(avatarImgs).length)\n            ? (_openBlock(), _createElementBlock(\"div\", {\n                key: 0,\n                class: \"avatar-edit-box\",\n                onMousedown: _cache[0] || (_cache[0] = (e) => e.preventDefault())\n              }, [\n                _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"avatar-edit-title\" }, \"修改头像\", -1)),\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(avatarImgs), (img) => {\n                  return (_openBlock(), _createElementBlock(\"div\", {\n                    key: img.url,\n                    class: \"avatar-edit-item\",\n                    style: _normalizeStyle(getSelectStyle(img.url)),\n                    onClick: ($event: any) => (selectedAvatar.value = img.url)\n                  }, [\n                    _createElementVNode(\"img\", {\n                      src: img.url,\n                      alt: \"头像\",\n                      width: 28,\n                      height: 28\n                    }, null, 8, _hoisted_4)\n                  ], 12, _hoisted_3))\n                }), 128)),\n                _createElementVNode(\"div\", _hoisted_5, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(bgColorList), (color) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                      key: color,\n                      class: \"color-item\",\n                      style: _normalizeStyle({\n                                        background:\n                                            selectedBg.value === color\n                                                ? color\n                                                : '#fff',\n                                    }),\n                      onClick: ($event: any) => (selectedBg.value = color)\n                    }, [\n                      _createElementVNode(\"div\", _hoisted_7, [\n                        _createElementVNode(\"div\", {\n                          style: _normalizeStyle({ background: color }),\n                          class: \"color-item-inner\"\n                        }, [\n                          (selectedBg.value === color)\n                            ? (_openBlock(), _createElementBlock(\"img\", _hoisted_8))\n                            : _createCommentVNode(\"\", true)\n                        ], 4)\n                      ])\n                    ], 12, _hoisted_6))\n                  }), 128))\n                ]),\n                _createElementVNode(\"div\", _hoisted_9, [\n                  _createVNode(_component_a_button, {\n                    type: \"primary\",\n                    class: \"btn\",\n                    onClick: confirm\n                  }, {\n                    default: _withCtx(() => _cache[1] || (_cache[1] = [\n                      _createTextVNode(\" 确定 \")\n                    ])),\n                    _: 1\n                  })\n                ])\n              ], 32))\n            : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                _createVNode(_component_a_spin)\n              ]))\n        ]),\n        _: 1\n      }, 512)\n    ], 4)\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"avatar-container\">\n        <div :style=\"{ background: currentBg }\" class=\"avatar-img\">\n            <img :src=\"currentAvatar\" :width=\"32\" :height=\"32\" />\n            <div class=\"edit-btn\">\n                <h-icon-edit class=\"edit-icon h-icon-edit\" />\n            </div>\n            <a-select\n                ref=\"selectRef\"\n                :bordered=\"false\"\n                :dropdownMatchSelectWidth=\"false\"\n                class=\"select-avatar\"\n                dropdownClassName=\"avatar-dropdown\"\n            >\n                <template #dropdownRender=\"{ menuNode: menu }\">\n                    <v-nodes :vnodes=\"menu\" />\n                    <div\n                        v-if=\"avatarImgs.length\"\n                        class=\"avatar-edit-box\"\n                        @mousedown=\"(e) => e.preventDefault()\"\n                    >\n                        <div class=\"avatar-edit-title\">修改头像</div>\n                        <template v-for=\"img in avatarImgs\" :key=\"img.url\">\n                            <div\n                                class=\"avatar-edit-item\"\n                                :style=\"getSelectStyle(img.url)\"\n                                @click=\"selectedAvatar = img.url\"\n                            >\n                                <img\n                                    :src=\"img.url\"\n                                    alt=\"头像\"\n                                    :width=\"28\"\n                                    :height=\"28\"\n                                />\n                            </div>\n                        </template>\n                        <div class=\"color-list\">\n                            <template v-for=\"color in bgColorList\" :key=\"color\">\n                                <div\n                                    class=\"color-item\"\n                                    :style=\"{\n                                        background:\n                                            selectedBg === color\n                                                ? color\n                                                : '#fff',\n                                    }\"\n                                    @click=\"selectedBg = color\"\n                                >\n                                    <div class=\"color-item-bgf\">\n                                        <div\n                                            :style=\"{ background: color }\"\n                                            class=\"color-item-inner\"\n                                        >\n                                            <img\n                                                v-if=\"selectedBg === color\"\n                                                src=\"@/assets/avatars/select.svg\"\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                            </template>\n                        </div>\n                        <div class=\"btn-wrap\">\n                            <a-button\n                                type=\"primary\"\n                                class=\"btn\"\n                                @click=\"confirm\"\n                            >\n                                确定\n                            </a-button>\n                        </div>\n                    </div>\n                    <div v-else class=\"avatar-loading\">\n                        <a-spin />\n                    </div>\n                </template>\n            </a-select>\n        </div>\n    </div>\n</template>\n<script setup lang=\"ts\">\nimport { ref, onMounted, watch } from 'vue';\nimport { bgColorList, avatarImgs, queryAvatarImgs } from './constants';\nimport '@hwork/icon/edit';\nconst props = defineProps<{ avatar: string; avatarBg: string }>();\nconst selectedAvatar = ref('');\nconst selectedBg = ref(bgColorList[0]);\nconst currentAvatar = ref(require(`@/assets/avatars/avatar1.svg`));\nconst currentBg = ref(bgColorList[0]);\nconst selectRef = ref<HTMLElement>();\nconst getSelectStyle = (url: string) => {\n    if (url === selectedAvatar.value) {\n        return { background: selectedBg.value };\n    } else {\n        return {};\n    }\n};\nconst confirm = () => {\n    currentAvatar.value = selectedAvatar.value;\n    currentBg.value = selectedBg.value;\n    selectRef.value?.blur();\n};\nconst getAvatarData = () => {\n    return {\n        icon: currentAvatar.value,\n        iconBackground: currentBg.value,\n    };\n};\nconst initData = () => {\n    currentBg.value = props.avatarBg || bgColorList[0];\n    selectedBg.value = props.avatarBg || bgColorList[0];\n    selectedAvatar.value = props.avatar || avatarImgs.value[0]?.url;\n    currentAvatar.value = props.avatar || avatarImgs.value[0]?.url;\n};\nwatch(\n    () => avatarImgs.value,\n    (newVal) => {\n        if (newVal.length) {\n            initData();\n        }\n    },\n);\nwatch(\n    () => props.avatar,\n    () => {\n        initData();\n    },\n);\nonMounted(() => {\n    queryAvatarImgs();\n});\ndefineExpose({ getAvatarData });\n</script>\n<style lang=\"less\" scoped>\n.avatar-container {\n    position: relative;\n    width: 64px;\n    height: 64px;\n    border-radius: 12px;\n    border: 1px solid #c9cdd4;\n    padding: 4px;\n}\n.avatar-img {\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    border-radius: 12px;\n    overflow: hidden;\n    cursor: pointer;\n    .edit-btn {\n        position: absolute;\n        width: 18px;\n        height: 18px;\n        bottom: 0;\n        right: 0;\n        font-size: 12px;\n        padding: 0 3px;\n        border-radius: 8px 0 0;\n        color: #fff;\n        background: rgba(29, 33, 41, 0.5);\n        .h-icon-edit {\n            position: absolute;\n            top: 1px;\n        }\n    }\n}\n.select-avatar {\n    position: absolute;\n    opacity: 0;\n    bottom: -6px;\n    :deep(.@{ant-prefix}-select-selector) {\n        width: 70px;\n        height: 70px;\n    }\n}\n</style>\n<style lang=\"less\">\n.avatar-dropdown {\n    box-sizing: border-box;\n    width: 320px;\n    padding: 12px 16px;\n    border-radius: 8px;\n    box-shadow: 0 4px 16px 0 rgba(0, 0, 0, 0.1);\n    .avatar-edit-title {\n        line-height: 22px;\n        font-weight: 600;\n        margin-bottom: 8px;\n    }\n    .avatar-edit-item {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        width: 48px;\n        height: 48px;\n        border-radius: 12px;\n        background: #c9cdd4;\n        margin-bottom: 12px;\n        margin-right: 12px;\n        cursor: pointer;\n        &:nth-child(5n + 1) {\n            margin-right: 0;\n        }\n    }\n    .color-list {\n        display: flex;\n        font-size: 0;\n        justify-content: space-between;\n        .color-item {\n            width: 32px;\n            height: 32px;\n            border-radius: 50%;\n            cursor: pointer;\n            .color-item-bgf {\n                width: 28px;\n                height: 28px;\n                background: #fff;\n                border-radius: 50%;\n                padding: 2px;\n            }\n            .color-item-inner {\n                box-sizing: border-box;\n                width: 24px;\n                height: 24px;\n                border-radius: 50%;\n            }\n        }\n        .color-item,\n        .color-item-bgf,\n        .color-item-inner {\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n        }\n    }\n    .btn-wrap {\n        margin-top: 18px;\n        .btn {\n            width: 100%;\n        }\n    }\n    .avatar-loading {\n        height: 293px;\n    }\n}\n</style>\n","import script from \"./Avatar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Avatar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Avatar.vue?vue&type=style&index=0&id=8a3e8522&lang=less&scoped=true\"\nimport \"./Avatar.vue?vue&type=style&index=1&id=8a3e8522&lang=less\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8a3e8522\"]])\n\nexport default __exports__"],"names":["getAvatarImgs","request","url","avatarImgs","ref","bgColorList","queryAvatarImgs","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_context","prev","next","sent","value","data","stop","apply","arguments","e","s","_t","_this","_classCallCheck","_callSuper","cssClassName","_inherits","_createClass","key","t","window","customElements","get","define","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","src","_imports_0","_hoisted_9","_hoisted_10","_defineComponent","__name","props","avatar","avatarBg","setup","__props","__expose","expose","selectedAvatar","selectedBg","currentAvatar","require","currentBg","selectRef","getSelectStyle","background","confirm","_selectRef$value","blur","getAvatarData","icon","iconBackground","initData","_avatarImgs$value$","_avatarImgs$value$2","watch","newVal","length","onMounted","_ctx","_cache","_component_v_nodes","_resolveComponent","_component_a_button","_component_a_spin","_component_a_select","_openBlock","_createElementBlock","_createElementVNode","style","_normalizeStyle","width","height","_createVNode","ref_key","bordered","dropdownMatchSelectWidth","dropdownClassName","dropdownRender","_withCtx","_ref2","menu","menuNode","vnodes","_unref","onMousedown","preventDefault","_Fragment","_renderList","img","onClick","$event","alt","color","_createCommentVNode","type","default","_createTextVNode","_","__exports__"],"sourceRoot":""}