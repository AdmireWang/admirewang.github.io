{"version":3,"file":"js/chat-history.51d5816f.js","mappings":"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","sources":["webpack://aiassistant-/./src/components/MobileSearch/index.vue?a11d","webpack://aiassistant-/./src/components/MobileSearch/index.vue","webpack://aiassistant-/./src/components/MobileSearch/index.vue?9bc6","webpack://aiassistant-/./src/components/HistoryHeader.vue?875e","webpack://aiassistant-/./src/components/HistoryHeader.vue","webpack://aiassistant-/./src/components/HistoryHeader.vue?4ce4","webpack://aiassistant-/./src/components/ClearHistoryModal/ClearHistoryModal.vue?1a3a","webpack://aiassistant-/./src/components/ClearHistoryModal/ClearHistoryModal.vue","webpack://aiassistant-/./src/components/ClearHistoryModal/ClearHistoryModal.vue?f487","webpack://aiassistant-/./src/views/Mobile/ChatHistory.vue?b41c","webpack://aiassistant-/./src/views/Mobile/ChatHistory.vue","webpack://aiassistant-/./src/views/Mobile/ChatHistory.vue?4105"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"ai-mobile-search\" }\nconst _hoisted_2 = [\"value\"]\n\nimport { PropType, ref } from 'vue';\nimport '@hwork/icon/search';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'index',\n  props: {\n    modelValue: String as PropType<string>,\n    showCancel: {\n        type: Boolean as PropType<boolean>,\n        default: false,\n    },\n},\n  emits: [\"update:modelValue\", \"cancel\"],\n  setup(__props, { emit: __emit }) {\n\nconst timer = ref<any>(null);\nconst props = __props;\n\nconst emit = __emit;\n\nconst updateValue = (event: Event) => {\n    if (timer.value !== null) {\n        clearTimeout(timer.value);\n    }\n    timer.value = setTimeout(() => {\n        const target = event.target as HTMLInputElement | null;\n        if (target) {\n            emit('update:modelValue', target.value);\n        }\n    }, 300);\n};\n\nconst cancelHandle = () => {\n    emit('update:modelValue', '');\n    emit('cancel');\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"ai-mobile-search-after\" }, [\n      _createElementVNode(\"h-icon-search\")\n    ], -1)),\n    _createElementVNode(\"input\", {\n      class: \"ai-mobile-search-input\",\n      placeholder: \"搜索\",\n      value: props.modelValue,\n      onInput: updateValue\n    }, null, 40, _hoisted_2),\n    (props.modelValue)\n      ? (_openBlock(), _createElementBlock(\"h-icon-close\", {\n          key: 0,\n          class: \"ai-mobile-search-cancel-icon\",\n          onClick: cancelHandle\n        }))\n      : _createCommentVNode(\"\", true),\n    (__props.showCancel || props.modelValue)\n      ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 1,\n          class: \"ai-mobile-search-cancel\",\n          onClick: cancelHandle\n        }, \" 取消 \"))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"ai-mobile-search\">\n        <div class=\"ai-mobile-search-after\">\n            <h-icon-search />\n        </div>\n        <input\n            class=\"ai-mobile-search-input\"\n            placeholder=\"搜索\"\n            :value=\"props.modelValue\"\n            @input=\"updateValue\"\n        />\n        <h-icon-close\n            v-if=\"props.modelValue\"\n            class=\"ai-mobile-search-cancel-icon\"\n            @click=\"cancelHandle\"\n        />\n\n        <div\n            class=\"ai-mobile-search-cancel\"\n            v-if=\"showCancel || props.modelValue\"\n            @click=\"cancelHandle\"\n        >\n            取消\n        </div>\n    </div>\n</template>\n<script setup lang=\"ts\">\nimport { PropType, ref } from 'vue';\nimport '@hwork/icon/search';\n\nconst timer = ref<any>(null);\nconst props = defineProps({\n    modelValue: String as PropType<string>,\n    showCancel: {\n        type: Boolean as PropType<boolean>,\n        default: false,\n    },\n});\n\nconst emit = defineEmits<{\n    (e: 'update:modelValue', value: string): void;\n    (e: 'cancel'): void;\n}>();\n\nconst updateValue = (event: Event) => {\n    if (timer.value !== null) {\n        clearTimeout(timer.value);\n    }\n    timer.value = setTimeout(() => {\n        const target = event.target as HTMLInputElement | null;\n        if (target) {\n            emit('update:modelValue', target.value);\n        }\n    }, 300);\n};\n\nconst cancelHandle = () => {\n    emit('update:modelValue', '');\n    emit('cancel');\n};\n</script>\n<style lang=\"less\" scoped>\n.ai-mobile-search {\n    margin-top: 16px;\n    margin-bottom: 12px;\n    width: 100%;\n    height: 32px;\n    border-radius: 6px;\n    overflow: hidden;\n    display: flex;\n    align-items: center;\n    position: relative;\n    &-input {\n        background-color: #fff;\n        border: 0px solid;\n        height: 36px;\n        outline: none;\n        font-size: 14px;\n        flex-grow: 1;\n        border-top-right-radius: 8px;\n        border-bottom-right-radius: 8px;\n        width: 0;\n        caret-color: rgb(134, 144, 156);\n        &::placeholder {\n            color: rgb(134, 144, 156);\n        }\n    }\n    &-cancel-icon {\n        font-size: 16px;\n        color: #c9cdd4;\n        position: absolute;\n        right: 52px;\n    }\n    &-cancel {\n        flex-shrink: 1;\n        height: 36px;\n        padding: 0 4px 0 12px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: rgb(78, 89, 105);\n    }\n    &-after {\n        width: 36px;\n        flex-shrink: 1;\n        height: 36px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: rgb(134, 144, 156);\n        background: #fff;\n    }\n}\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=10ef3d47&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-10ef3d47\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\nimport _imports_0 from '@/assets/icons/left.svg'\n\n\nimport '@hwork/icon/delete';\nimport { useRouter } from 'vue-router';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'HistoryHeader',\n  setup(__props) {\n\nconst router = useRouter();\n\nconst toBack = () => {\n    router.go(-1);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_layout_header = _resolveComponent(\"a-layout-header\")!\n\n  return (_openBlock(), _createBlock(_component_a_layout_header, { class: \"chat-header-mobile\" }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", {\n        class: \"chat-back\",\n        onClick: toBack\n      }, _cache[1] || (_cache[1] = [\n        _createElementVNode(\"img\", {\n          src: _imports_0,\n          alt: \"返回\"\n        }, null, -1)\n      ])),\n      _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"chat-title\" }, [\n        _createElementVNode(\"span\", null, \"历史记录\")\n      ], -1)),\n      _createElementVNode(\"span\", {\n        class: \"chat-delete\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('delete')))\n      }, _cache[2] || (_cache[2] = [\n        _createElementVNode(\"h-icon-delete\", null, null, -1)\n      ]))\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n    <a-layout-header class=\"chat-header-mobile\">\n        <div class=\"chat-back\" @click=\"toBack\">\n            <img src=\"@/assets/icons/left.svg\" alt=\"返回\" />\n        </div>\n\n        <div class=\"chat-title\">\n            <span>历史记录</span>\n        </div>\n        <span class=\"chat-delete\" @click=\"$emit('delete')\">\n            <h-icon-delete />\n        </span>\n    </a-layout-header>\n</template>\n<script setup lang=\"ts\">\nimport '@hwork/icon/delete';\nimport { useRouter } from 'vue-router';\nconst router = useRouter();\n\nconst toBack = () => {\n    router.go(-1);\n};\n</script>\n<style lang=\"less\" scoped>\n.chat-header-mobile {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 48px;\n    line-height: 48px;\n    padding: 0 11px;\n    background-color: transparent;\n    &.chat-header-mobile-ios {\n        height: 100px;\n        padding-top: 52px;\n    }\n    .chat-back {\n        display: flex;\n        width: 40px;\n        height: 40px;\n        align-items: center;\n        color: #4e5969;\n    }\n    .chat-title {\n        display: inline-flex;\n        align-items: center;\n        font-size: 18px;\n        font-weight: 600;\n    }\n    .chat-delete {\n        display: inline-flex;\n        width: 30px;\n        height: 30px;\n        justify-content: center;\n        align-items: center;\n        font-size: 20px;\n        color: #4e5969;\n    }\n}\n</style>\n","import script from \"./HistoryHeader.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HistoryHeader.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HistoryHeader.vue?vue&type=style&index=0&id=a0b93688&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a0b93688\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"footer-wrap\" }\n\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { clearChatGroups } from '@/hooks/useChatGroupList';\nimport { deleteChatGroup } from '@/api/chat';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ClearHistoryModal',\n  emits: [\"refresh\"],\n  setup(__props, { expose: __expose, emit: __emit }) {\n\nconst router = useRouter();\nconst modalVisible = ref(false);\nconst emit = __emit;\nasync function handleClear() {\n    await clearChatGroups();\n    router.push({\n        path: '/chat/new',\n        query: {\n            agent: 'super',\n        },\n    });\n    modalVisible.value = false;\n};\nasync function deleteHistory(groupCode: string) {\n    await deleteChatGroup(groupCode);\n};\nconst show = async ({ groupCode }: { groupCode?: string }) => {\n    if (groupCode) {\n        await deleteHistory(groupCode);\n        emit('refresh');\n    } else {\n        modalVisible.value = true;\n    }\n};\n__expose({ show });\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_modal = _resolveComponent(\"a-modal\")!\n\n  return (_openBlock(), _createBlock(_component_a_modal, {\n    visible: modalVisible.value,\n    \"onUpdate:visible\": _cache[1] || (_cache[1] = ($event: any) => ((modalVisible).value = $event)),\n    closable: false,\n    footer: null,\n    width: 311,\n    wrapClassName: \"clear-modal-mobile\"\n  }, {\n    default: _withCtx(() => [\n      _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"modal-content\" }, \"删除后无法恢复，是否继续此操作？\", -1)),\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", {\n          class: \"btn\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (modalVisible.value = false))\n        }, \"取消\"),\n        _createElementVNode(\"div\", {\n          class: \"btn danger\",\n          onClick: handleClear\n        }, \"确认\")\n      ])\n    ]),\n    _: 1\n  }, 8, [\"visible\"]))\n}\n}\n\n})","<template>\n    <a-modal\n        v-model:visible=\"modalVisible\"\n        :closable=\"false\"\n        :footer=\"null\"\n        :width=\"311\"\n        wrapClassName=\"clear-modal-mobile\"\n    >\n        <div class=\"modal-content\">删除后无法恢复，是否继续此操作？</div>\n        <div class=\"footer-wrap\">\n            <div class=\"btn\" @click=\"modalVisible = false\">取消</div>\n            <div class=\"btn danger\" @click=\"handleClear\">确认</div>\n        </div>\n    </a-modal>\n</template>\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { clearChatGroups } from '@/hooks/useChatGroupList';\nimport { deleteChatGroup } from '@/api/chat';\nconst router = useRouter();\nconst modalVisible = ref(false);\nconst emit = defineEmits<{\n    (e: 'refresh'): void;\n}>();\nasync function handleClear() {\n    await clearChatGroups();\n    router.push({\n        path: '/chat/new',\n        query: {\n            agent: 'super',\n        },\n    });\n    modalVisible.value = false;\n};\nasync function deleteHistory(groupCode: string) {\n    await deleteChatGroup(groupCode);\n};\nconst show = async ({ groupCode }: { groupCode?: string }) => {\n    if (groupCode) {\n        await deleteHistory(groupCode);\n        emit('refresh');\n    } else {\n        modalVisible.value = true;\n    }\n};\ndefineExpose({ show });\n</script>\n<style lang=\"less\">\n.clear-modal-mobile {\n    .modal-title {\n        min-height: 24px;\n    }\n    .modal-content {\n        color: #4e5969;\n        font-size: 14px;\n        line-height: 94px;\n        text-align: center;\n    }\n    .footer-wrap {\n        display: flex;\n        height: 54px;\n        margin: 0 -24px -16px;\n        border-top: 1px solid #E5E6EB;\n        .btn {\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            width: 50%;\n            font-size: 16px;\n            &.danger {\n                color: #F53F3F;\n                border-left: 1px solid #E5E6EB;\n            }\n        }\n    }\n}\n</style>","import script from \"./ClearHistoryModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ClearHistoryModal.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ClearHistoryModal.vue?vue&type=style&index=0&id=7d1ecb09&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, createElementVNode as _createElementVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, withCtx as _withCtx, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { class: \"chat-history-search\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"date-wrap\"\n}\nconst _hoisted_3 = {\n  key: 1,\n  class: \"date-wrap mt20\"\n}\nconst _hoisted_4 = {\n  key: 1,\n  class: \"chat-list-empty\"\n}\nconst _hoisted_5 = [\"src\"]\n\nimport { ref, computed, watch } from 'vue';\nimport dayjs from 'dayjs';\nimport ChatCard from '@/components/ChatCard/index.vue';\nimport HistoryHeader from '@/components/HistoryHeader.vue';\nimport ClearHistoryModal from '@/components/ClearHistoryModal/ClearHistoryModal.vue';\nimport MobileSearch from '@/components/MobileSearch/index.vue';\nimport emptyDataImage from '@/assets/images/empty-data.png';\nimport {\n    chatGroupList,\n    queryChatGroupList,\n    changeChatGroup,\n    chatGroupFilterList,\n} from '@/hooks/useChatGroupList';\nimport { isiOS } from '@/utils/util';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ChatHistory',\n  setup(__props) {\n\nconst searchText = ref<string>('');\nconst modalRef = ref<InstanceType<typeof ClearHistoryModal>>();\nconst loading = ref<boolean>(true);\nconst todayChatGroupList = computed(() => {\n    let list = chatGroupList.value;\n    if (searchText.value) {\n        list = chatGroupFilterList.value;\n    }\n\n    const tmp = list.filter((item) => {\n        return (\n            dayjs(item.lastChatTime).format('YYYY-MM-DD') ===\n                dayjs().format('YYYY-MM-DD') && item.agentCode !== 'feedback'\n        );\n    });\n    return tmp.reverse();\n});\n\nconst historyChatGroupList = computed(() => {\n    let list = chatGroupList.value;\n    if (searchText.value) {\n        list = chatGroupFilterList.value;\n    }\n    const tmp = list.filter((item) => {\n        return (\n            dayjs(item.lastChatTime).format('YYYY-MM-DD') !==\n            dayjs().format('YYYY-MM-DD')\n        );\n    });\n    return tmp.reverse();\n});\nconst clearPrompt = (groupCode?: string) => {\n    modalRef.value?.show({ groupCode });\n};\n\nwatch(\n    () => searchText.value,\n    async () => {\n        loading.value = true;\n        await queryChatGroupList(searchText.value);\n        loading.value = false;\n    },\n    { immediate: true },\n);\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_layout_content = _resolveComponent(\"a-layout-content\")!\n  const _component_a_spin = _resolveComponent(\"a-spin\")!\n  const _component_a_layout = _resolveComponent(\"a-layout\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_a_layout, { class: \"chat-history\" }, {\n      default: _withCtx(() => [\n        _createVNode(HistoryHeader, { onDelete: clearPrompt }),\n        _createElementVNode(\"div\", _hoisted_1, [\n          _createVNode(MobileSearch, {\n            modelValue: searchText.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((searchText).value = $event))\n          }, null, 8, [\"modelValue\"])\n        ]),\n        _createVNode(_component_a_spin, { spinning: loading.value }, {\n          default: _withCtx(() => [\n            (todayChatGroupList.value.length || historyChatGroupList.value.length)\n              ? (_openBlock(), _createBlock(_component_a_layout_content, {\n                  key: 0,\n                  class: _normalizeClass([\"chat-list\", { 'chat-list-ios': _unref(isiOS)() }])\n                }, {\n                  default: _withCtx(() => [\n                    (todayChatGroupList.value.length > 0)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \" 今天 \"))\n                      : _createCommentVNode(\"\", true),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(todayChatGroupList.value, (item) => {\n                      return (_openBlock(), _createBlock(ChatCard, {\n                        key: item.groupCode,\n                        chatGroup: item,\n                        onJump: ($event: any) => (_unref(changeChatGroup)(item.groupCode)),\n                        onDelete: ($event: any) => (clearPrompt(item.groupCode))\n                      }, null, 8, [\"chatGroup\", \"onJump\", \"onDelete\"]))\n                    }), 128)),\n                    (historyChatGroupList.value.length > 0)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \" 最近7天 \"))\n                      : _createCommentVNode(\"\", true),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(historyChatGroupList.value, (item) => {\n                      return (_openBlock(), _createBlock(ChatCard, {\n                        key: item.groupCode,\n                        chatGroup: item,\n                        onJump: ($event: any) => (_unref(changeChatGroup)(item.groupCode)),\n                        onDelete: ($event: any) => (clearPrompt(item.groupCode))\n                      }, null, 8, [\"chatGroup\", \"onJump\", \"onDelete\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"class\"]))\n              : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                  _createElementVNode(\"img\", { src: _unref(emptyDataImage) }, null, 8, _hoisted_5),\n                  _createElementVNode(\"span\", null, _toDisplayString(searchText.value ? '无搜索结果' : '暂无数据'), 1)\n                ]))\n          ]),\n          _: 1\n        }, 8, [\"spinning\"])\n      ]),\n      _: 1\n    }),\n    _createVNode(ClearHistoryModal, {\n      ref_key: \"modalRef\",\n      ref: modalRef,\n      onRefresh: _cache[1] || (_cache[1] = () => _unref(queryChatGroupList)(searchText.value))\n    }, null, 512)\n  ], 64))\n}\n}\n\n})","<template>\n    <a-layout class=\"chat-history\">\n        <HistoryHeader @delete=\"clearPrompt\" />\n        <div class=\"chat-history-search\">\n            <MobileSearch v-model=\"searchText\" />\n        </div>\n\n        <a-spin :spinning=\"loading\">\n            <a-layout-content\n                class=\"chat-list\"\n                :class=\"{ 'chat-list-ios': isiOS() }\"\n                v-if=\"todayChatGroupList.length || historyChatGroupList.length\"\n            >\n                <div v-if=\"todayChatGroupList.length > 0\" class=\"date-wrap\">\n                    今天\n                </div>\n                <template\n                    v-for=\"item in todayChatGroupList\"\n                    :key=\"item.groupCode\"\n                >\n                    <ChatCard\n                        :chatGroup=\"item\"\n                        @jump=\"changeChatGroup(item.groupCode)\"\n                        @delete=\"clearPrompt(item.groupCode)\"\n                    />\n                </template>\n                <div\n                    v-if=\"historyChatGroupList.length > 0\"\n                    class=\"date-wrap mt20\"\n                >\n                    最近7天\n                </div>\n                <template\n                    v-for=\"item in historyChatGroupList\"\n                    :key=\"item.groupCode\"\n                >\n                    <ChatCard\n                        :chatGroup=\"item\"\n                        @jump=\"changeChatGroup(item.groupCode)\"\n                        @delete=\"clearPrompt(item.groupCode)\"\n                    />\n                </template>\n            </a-layout-content>\n            <div class=\"chat-list-empty\" v-else>\n                <img :src=\"emptyDataImage\" />\n                <span>\n                    {{ searchText ? '无搜索结果' : '暂无数据' }}\n                </span>\n            </div>\n        </a-spin>\n    </a-layout>\n    <ClearHistoryModal\n        ref=\"modalRef\"\n        @refresh=\"() => queryChatGroupList(searchText)\"\n    />\n</template>\n<script setup lang=\"ts\">\nimport { ref, computed, watch } from 'vue';\nimport dayjs from 'dayjs';\nimport ChatCard from '@/components/ChatCard/index.vue';\nimport HistoryHeader from '@/components/HistoryHeader.vue';\nimport ClearHistoryModal from '@/components/ClearHistoryModal/ClearHistoryModal.vue';\nimport MobileSearch from '@/components/MobileSearch/index.vue';\nimport emptyDataImage from '@/assets/images/empty-data.png';\nimport {\n    chatGroupList,\n    queryChatGroupList,\n    changeChatGroup,\n    chatGroupFilterList,\n} from '@/hooks/useChatGroupList';\nimport { isiOS } from '@/utils/util';\nconst searchText = ref<string>('');\nconst modalRef = ref<InstanceType<typeof ClearHistoryModal>>();\nconst loading = ref<boolean>(true);\nconst todayChatGroupList = computed(() => {\n    let list = chatGroupList.value;\n    if (searchText.value) {\n        list = chatGroupFilterList.value;\n    }\n\n    const tmp = list.filter((item) => {\n        return (\n            dayjs(item.lastChatTime).format('YYYY-MM-DD') ===\n                dayjs().format('YYYY-MM-DD') && item.agentCode !== 'feedback'\n        );\n    });\n    return tmp.reverse();\n});\n\nconst historyChatGroupList = computed(() => {\n    let list = chatGroupList.value;\n    if (searchText.value) {\n        list = chatGroupFilterList.value;\n    }\n    const tmp = list.filter((item) => {\n        return (\n            dayjs(item.lastChatTime).format('YYYY-MM-DD') !==\n            dayjs().format('YYYY-MM-DD')\n        );\n    });\n    return tmp.reverse();\n});\nconst clearPrompt = (groupCode?: string) => {\n    modalRef.value?.show({ groupCode });\n};\n\nwatch(\n    () => searchText.value,\n    async () => {\n        loading.value = true;\n        await queryChatGroupList(searchText.value);\n        loading.value = false;\n    },\n    { immediate: true },\n);\n</script>\n<style lang=\"less\" scoped>\n.chat-list-empty {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    margin-top: 60px;\n    flex-direction: column;\n    color: rgb(78, 89, 105);\n    img {\n        width: 110px;\n    }\n}\n.chat-history {\n    background: transparent;\n    &-search {\n        padding: 0 16px;\n    }\n}\n.mt20 {\n    margin-top: 20px;\n}\n.chat-list {\n    overflow-y: auto;\n    padding: 0 16px 16px;\n    height: calc(100vh - 128px);\n}\n.chat-list-ios {\n    height: calc(100vh - 162px) !important;\n}\n.date-wrap {\n    color: #4e5969;\n    line-height: 20px;\n}\n</style>\n","import script from \"./ChatHistory.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ChatHistory.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ChatHistory.vue?vue&type=style&index=0&id=55f227be&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-55f227be\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_defineComponent","__name","props","modelValue","String","showCancel","type","Boolean","default","emits","setup","__props","emit","__emit","timer","ref","updateValue","event","value","clearTimeout","setTimeout","target","cancelHandle","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","placeholder","onInput","key","onClick","_createCommentVNode","__exports__","router","useRouter","toBack","go","_component_a_layout_header","_resolveComponent","_createBlock","_withCtx","src","_imports_0","alt","$event","$emit","_","expose","__expose","modalVisible","async","handleClear","clearChatGroups","push","path","query","agent","deleteHistory","groupCode","deleteChatGroup","show","_component_a_modal","visible","closable","footer","width","wrapClassName","_hoisted_3","_hoisted_4","_hoisted_5","searchText","modalRef","loading","todayChatGroupList","computed","list","chatGroupList","chatGroupFilterList","tmp","filter","item","dayjs","lastChatTime","format","agentCode","reverse","historyChatGroupList","clearPrompt","_modalRef$value","watch","queryChatGroupList","immediate","_component_a_layout_content","_component_a_spin","_component_a_layout","_Fragment","_createVNode","HistoryHeader","onDelete","MobileSearch","spinning","length","_normalizeClass","_unref","isiOS","_renderList","ChatCard","chatGroup","onJump","changeChatGroup","emptyDataImage","_toDisplayString","ClearHistoryModal","ref_key","onRefresh"],"sourceRoot":""}